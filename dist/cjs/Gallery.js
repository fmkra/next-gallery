"use strict";var e=require("react/jsx-runtime"),t=require("react"),r=require("next/image"),l=require("./useWindowWidth.js");function i(e){return e&&e.__esModule?e:{default:e}}var o=i(r);exports.Gallery=function(r){let{images:i,widths:n,ratios:s,percentVw:a=100,margin:u="2px",initState:d,imgLoader:p,overlay:f,spanLastRow:h=0}=r;const[c,x]=t.useState(new Array(i.length).fill(d)),[m,g]=t.useMemo((()=>{const e=[],t=[];for(const r of s){let l=0,o=[];for(let e=0;e<i.length;e++)if(l+i[e].aspect_ratio<=r)l+=i[e].aspect_ratio;else{for(let t=o.length;t<e;t++)o.push(Math.floor(i[t].aspect_ratio/l*1e3)/10);l=i[e].aspect_ratio}const n=Math.floor(1e3*(1-l/r))/10,s=100-n<h;for(let e=o.length;e<i.length;e++)o.push(Math.floor(i[e].aspect_ratio/(s?r:l)*1e3)/10);e.push(o),t.push(s?n:0)}return[e,t]}),[i,s,h]),v=l.default(),w=t.useMemo((()=>{if(null===v)return null;const e=n.findIndex((e=>e>v));return-1===e?s.length-1:e}),[v,n,s]);return null==v||null===w?null:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap"},children:[i.map(((t,r)=>{var l;return e.jsx("div",{style:{boxSizing:"border-box",width:m[w][r]+"%",flexShrink:0,flexGrow:1,position:"relative",paddingBottom:m[w][r]/t.aspect_ratio+"%"},children:e.jsxs("div",{style:{position:"absolute",top:u,left:u,right:u,bottom:u},children:[e.jsx(o.default,{src:t.src,alt:null!==(l=t.alt)&&void 0!==l?l:"",fill:!0,loader:p,sizes:n.map(((e,t)=>`(max-width: ${e}px) ${a/100*m[t][r]}vw`)).join(", ")+`, ${a/100*m[m.length-1][r]}vw`}),f?e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:f(t.name,c[r],(e=>{x(e instanceof Function?c.map(((t,l)=>l===r?e(t):t)):c.map(((t,l)=>l===r?e:t)))}))}):null]})},r)})),e.jsx("div",{style:{width:g[w]+"%",flexShrink:0,flexGrow:1}})]})};
//# sourceMappingURL=Gallery.js.map
