'use client';
import{jsxs as t,jsx as e}from"react/jsx-runtime";import{useState as o,useMemo as r}from"react";import i from"next/image";import l from"./useWindowWidth.js";function n(n){let{images:a,widths:s,ratios:p,percentVw:f=100,margin:h="2px",initState:d,imgLoader:c,overlay:m,spanLastRow:u=0}=n;const[g,x]=o(new Array(a.length).fill(d)),[w,v]=r((()=>{const t=[],e=[];for(const o of p){let r=0,i=[];for(let t=0;t<a.length;t++)if(r+a[t].aspect_ratio<=o)r+=a[t].aspect_ratio;else{for(let e=i.length;e<t;e++)i.push(Math.floor(a[e].aspect_ratio/r*1e3)/10);r=a[t].aspect_ratio}const l=Math.floor(1e3*(1-r/o))/10,n=100-l<u;for(let t=i.length;t<a.length;t++)i.push(Math.floor(a[t].aspect_ratio/(n?o:r)*1e3)/10);t.push(i),e.push(n?l:0)}return[t,e]}),[a,p,u]),y=l(),b=r((()=>{if(null===y)return null;const t=s.findIndex((t=>t>y));return-1===t?p.length-1:t}),[y,s,p]);return null==y||null===b?null:t("div",{style:{display:"flex",flexWrap:"wrap"},children:[a.map(((o,r)=>{var l;return e("div",{style:{boxSizing:"border-box",width:w[b][r]+"%",flexShrink:0,flexGrow:1,position:"relative",paddingBottom:w[b][r]/o.aspect_ratio+"%"},children:t("div",{style:{position:"absolute",top:h,left:h,right:h,bottom:h},children:[e(i,{src:o.src,alt:null!==(l=o.alt)&&void 0!==l?l:"",fill:!0,loader:c,sizes:s.map(((t,e)=>`(max-width: ${t}px) ${f/100*w[e][r]}vw`)).join(", ")+`, ${f/100*w[w.length-1][r]}vw`}),m?e("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:m(o.name,g[r],(t=>{x(t instanceof Function?g.map(((e,o)=>o===r?t(e):e)):g.map(((e,o)=>o===r?t:e)))}))}):null]})},r)})),e("div",{style:{width:v[b]+"%",flexShrink:0,flexGrow:1}})]})}export{n as Gallery};
//# sourceMappingURL=Gallery.js.map
